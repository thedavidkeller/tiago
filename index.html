<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>the splitter - split any bill</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fraunces:ital,opsz,wght@0,9..144,300;0,9..144,400;0,9..144,700;1,9..144,300;1,9..144,400;1,9..144,700&display=swap" rel="stylesheet">
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        :root {
            --primary: #D42B2B;
            --primary-hover: #b82020;
            --primary-active: #9e1818;
            --primary-ghost-bg: rgba(212, 43, 43, 0.1);
            --secondary: #f0f0ea;
            --accent: #D42B2B;
            --accent-warm: #e85d04;

            --bg-app: #0e0e0d;
            --surface-1: #181817;
            --surface-2: #202020;
            --surface-3: #2a2a28;
            --surface-4: #333330;

            --text-primary: #f0f0ea;
            --text-secondary: #b8b8b0;
            --text-tertiary: #7a7a72;
            --text-disabled: #4a4a44;

            --success: #22C55E;
            --warning: #F59E0B;
            --error: #D42B2B;

            --border-base: rgba(255,255,255,0.07);
            --border-hover: rgba(255,255,255,0.12);
            --border-focus: rgba(212, 43, 43, 0.5);
            --border-divider: rgba(255,255,255,0.04);

            --space-4xs: 4px;
            --space-3xs: 8px;
            --space-2xs: 12px;
            --space-xs: 16px;
            --space-sm: 24px;
            --space-md: 32px;
            --space-lg: 48px;
            --space-xl: 64px;

            --radius-xs: 4px;
            --radius-sm: 8px;
            --radius-md: 16px;
            --radius-lg: 24px;
            --radius-full: 9999px;

            --shadow-low: 0 1px 3px rgba(0,0,0,0.2);
            --shadow-mid: 0 4px 16px rgba(0,0,0,0.3);
            --shadow-high: 0 8px 32px rgba(0,0,0,0.4);

            --font-sans: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            --font-serif: 'Fraunces', serif;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            background-color: var(--bg-app);
            color: var(--text-primary);
            font-family: var(--font-sans);
            line-height: 1.6;
            font-size: 16px;
            -webkit-font-smoothing: antialiased;
            min-height: 100vh;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: -30%;
            left: -20%;
            width: 70%;
            height: 70%;
            background: radial-gradient(circle, rgba(212, 43, 43, 0.1) 0%, transparent 70%);
            z-index: 0;
            pointer-events: none;
        }

        body::after {
            content: '';
            position: fixed;
            bottom: -20%;
            right: -10%;
            width: 50%;
            height: 50%;
            background: radial-gradient(circle, rgba(212, 43, 43, 0.05) 0%, transparent 70%);
            z-index: 0;
            pointer-events: none;
        }

        #root { position: relative; z-index: 1; }

        .container {
            max-width: 960px;
            margin: 0 auto;
            padding: 0 32px;
            width: 100%;
        }

        /* Typography */
        .t-display { font-family: var(--font-serif); font-size: 48px; font-weight: 300; line-height: 1; letter-spacing: -0.02em; }
        .t-headline { font-family: var(--font-serif); font-size: 32px; font-weight: 300; line-height: 1.1; letter-spacing: -0.01em; }
        .t-title { font-size: 20px; font-weight: 600; line-height: 1.2; }
        .t-body { font-size: 16px; font-weight: 400; line-height: 1.6; }
        .t-label { font-size: 13px; font-weight: 500; letter-spacing: 0.01em; }
        .t-caption { font-size: 12px; font-weight: 400; }
        .t-mono { font-family: 'SF Mono', 'Fira Code', monospace; }

        .text-secondary { color: var(--text-secondary); }
        .text-tertiary { color: var(--text-tertiary); }
        .text-accent { color: var(--accent); }
        .text-success { color: var(--success); }
        .text-error { color: var(--error); }
        .text-primary-color { color: var(--primary); }
        .text-italic { font-style: italic; }

        /* Surfaces */
        .card {
            background: rgba(24, 24, 23, 0.7);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid var(--border-base);
            border-radius: var(--radius-md);
        }

        .card-hover {
            transition: border-color 180ms ease, box-shadow 180ms ease, transform 180ms ease;
        }
        .card-hover:hover {
            border-color: var(--border-hover);
            box-shadow: var(--shadow-mid);
            transform: translateY(-1px);
            cursor: pointer;
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            height: 52px;
            padding: 0 24px;
            border-radius: var(--radius-sm);
            font-family: var(--font-sans);
            font-weight: 500;
            font-size: 15px;
            cursor: pointer;
            transition: all 160ms ease;
            outline: none;
            gap: 8px;
            white-space: nowrap;
            border: none;
        }
        .btn:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; }
        .btn:active:not(:disabled) { transform: scale(0.97); }
        .btn:disabled { opacity: 0.35; cursor: not-allowed; pointer-events: none; }

        .btn-primary { background: var(--primary); color: #fff; }
        .btn-primary:hover:not(:disabled) { background: var(--primary-hover); }

        .btn-secondary { background: transparent; border: 1px solid var(--border-hover); color: var(--text-primary); }
        .btn-secondary:hover:not(:disabled) { background: var(--surface-2); border-color: var(--border-focus); }

        .btn-ghost { background: transparent; border: none; color: var(--text-secondary); padding: 0 12px; }
        .btn-ghost:hover:not(:disabled) { color: var(--text-primary); background: var(--surface-2); }

        .btn-danger { background: rgba(239, 68, 68, 0.15); border: 1px solid rgba(239,68,68,0.3); color: var(--error); }
        .btn-danger:hover:not(:disabled) { background: rgba(239, 68, 68, 0.25); }

        .btn-sm { height: 36px; padding: 0 14px; font-size: 13px; border-radius: 6px; }
        .btn-xs { height: 28px; padding: 0 10px; font-size: 12px; border-radius: 4px; }
        .btn-icon { width: 40px; height: 40px; padding: 0; border-radius: var(--radius-sm); }

        /* Inputs */
        .input-wrap { display: flex; flex-direction: column; gap: 6px; }
        .input-label { font-size: 12px; font-weight: 500; color: var(--text-tertiary); letter-spacing: 0.01em; }

        .input-field {
            height: 52px;
            background: var(--surface-2);
            border: 1px solid var(--border-base);
            border-radius: var(--radius-sm);
            padding: 0 16px;
            color: var(--text-primary);
            font-family: var(--font-sans);
            font-size: 15px;
            transition: border-color 160ms ease, box-shadow 160ms ease;
            width: 100%;
        }
        .input-field:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px rgba(212,43,43,0.15); }
        .input-field::placeholder { color: var(--text-disabled); }
        .input-field.has-prefix { padding-left: 36px; }

        .input-prefix {
            position: absolute;
            left: 14px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-tertiary);
            font-size: 15px;
            pointer-events: none;
        }

        /* Animations */
        @keyframes fadeUp {
            from { opacity: 0; transform: translateY(16px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.4; }
        }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }

        .fade-up { animation: fadeUp 500ms cubic-bezier(0,0,0.2,1) forwards; }
        .fade-in { animation: fadeIn 300ms ease forwards; }

        .stagger-1 { animation-delay: 60ms; }
        .stagger-2 { animation-delay: 120ms; }
        .stagger-3 { animation-delay: 180ms; }
        .stagger-4 { animation-delay: 240ms; }
        .stagger-5 { animation-delay: 300ms; }

        .spin { animation: spin 800ms linear infinite; }
        .pulse { animation: pulse 1.5s ease infinite; }

        /* Layout */
        .flex { display: flex; }
        .flex-col { flex-direction: column; }
        .flex-1 { flex: 1; }
        .items-center { align-items: center; }
        .items-start { align-items: flex-start; }
        .justify-between { justify-content: space-between; }
        .justify-center { justify-content: center; }
        .justify-end { justify-content: justify-end; }
        .gap-xs { gap: 8px; }
        .gap-sm { gap: 16px; }
        .gap-md { gap: 24px; }
        .gap-lg { gap: 32px; }
        .wrap { flex-wrap: wrap; }

        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
        .grid-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; }

        .p-xs { padding: 12px; }
        .p-sm { padding: 16px; }
        .p-md { padding: 24px; }
        .p-lg { padding: 32px; }
        .px-md { padding-left: 24px; padding-right: 24px; }
        .py-sm { padding-top: 16px; padding-bottom: 16px; }

        .mb-2xs { margin-bottom: 8px; }
        .mb-xs { margin-bottom: 12px; }
        .mb-sm { margin-bottom: 16px; }
        .mb-md { margin-bottom: 24px; }
        .mb-lg { margin-bottom: 32px; }
        .mb-xl { margin-bottom: 48px; }
        .mt-sm { margin-top: 16px; }
        .mt-md { margin-top: 24px; }
        .mt-lg { margin-top: 32px; }
        .ml-auto { margin-left: auto; }

        .w-full { width: 100%; }
        .text-right { text-align: right; }
        .text-center { text-align: center; }

        /* Divider */
        .divider {
            height: 1px;
            background: var(--border-divider);
            width: 100%;
        }

        /* Avatar */
        .avatar {
            width: 36px;
            height: 36px;
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 13px;
            border: 1px solid var(--border-base);
            flex-shrink: 0;
        }

        /* Pill / Badge */
        .badge {
            display: inline-flex;
            align-items: center;
            padding: 3px 10px;
            border-radius: var(--radius-full);
            font-size: 11px;
            font-weight: 600;
            letter-spacing: 0.01em;
        }
        .badge-success { background: rgba(34,197,94,0.12); color: var(--success); }
        .badge-warning { background: rgba(245,158,11,0.12); color: var(--warning); }
        .badge-info { background: rgba(99,102,241,0.12); color: var(--primary); }
        .badge-neutral { background: var(--surface-3); color: var(--text-secondary); }

        /* Tab */
        .tab-bar {
            display: flex;
            background: var(--surface-2);
            border-radius: var(--radius-sm);
            padding: 4px;
            gap: 2px;
        }
        .tab {
            flex: 1;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 160ms ease;
            color: var(--text-tertiary);
            border: none;
            background: transparent;
            font-family: var(--font-sans);
        }
        .tab.active {
            background: var(--surface-4);
            color: var(--text-primary);
        }
        .tab:hover:not(.active) { color: var(--text-secondary); }

        /* Upload zone */
        .upload-zone {
            border: 2px dashed var(--border-hover);
            border-radius: var(--radius-md);
            padding: 48px 32px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 12px;
            cursor: pointer;
            transition: all 200ms ease;
            text-align: center;
            background: rgba(212,43,43,0.03);
        }
        .upload-zone:hover, .upload-zone.drag-over {
            border-color: var(--primary);
            background: rgba(212,43,43,0.07);
        }

        /* Skeleton loader */
        .skeleton {
            background: linear-gradient(90deg, var(--surface-2) 25%, var(--surface-3) 50%, var(--surface-2) 75%);
            background-size: 200% 100%;
            animation: shimmer 1.4s infinite;
            border-radius: var(--radius-xs);
        }

        /* Checkbox */
        .checkbox-wrap {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
        }
        .checkbox {
            width: 18px;
            height: 18px;
            border-radius: 4px;
            border: 2px solid var(--border-hover);
            background: transparent;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            transition: all 140ms ease;
        }
        .checkbox.checked {
            background: var(--primary);
            border-color: var(--primary);
        }

        /* Person color dots */
        .person-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        /* Tooltip */
        .tooltip-wrap { position: relative; display: inline-flex; }
        .tooltip {
            position: absolute;
            bottom: calc(100% + 6px);
            left: 50%;
            transform: translateX(-50%);
            background: var(--surface-4);
            color: var(--text-primary);
            font-size: 11px;
            padding: 4px 8px;
            border-radius: 4px;
            white-space: nowrap;
            pointer-events: none;
            opacity: 0;
            transition: opacity 120ms ease;
            border: 1px solid var(--border-base);
        }
        .tooltip-wrap:hover .tooltip { opacity: 1; }

        /* Number input control */
        .num-control {
            display: flex;
            align-items: center;
            gap: 0;
            border: 1px solid var(--border-base);
            border-radius: var(--radius-sm);
            overflow: hidden;
            height: 36px;
        }
        .num-btn {
            width: 32px;
            height: 100%;
            background: var(--surface-2);
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 120ms ease;
            font-family: var(--font-sans);
        }
        .num-btn:hover { background: var(--surface-3); color: var(--text-primary); }
        .num-val {
            min-width: 32px;
            text-align: center;
            font-size: 14px;
            font-weight: 600;
            background: var(--surface-2);
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Prevent iOS auto-zoom on input focus */
        @media screen and (-webkit-min-device-pixel-ratio: 0) {
            input, select, textarea { font-size: 16px !important; }
        }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: var(--surface-3); border-radius: 3px; }

        /* Responsive */
        @media (max-width: 640px) {
            .container { padding: 0 24px; }
            .t-display { font-size: 36px; }
            .t-headline { font-size: 26px; }
            .grid-2 { grid-template-columns: 1fr; }
            .grid-3 { grid-template-columns: 1fr 1fr; }
            .hide-mobile { display: none; }
            .step-header { text-align: center; }
            .hide-on-mobile-step { display: none; }
            .upload-zone { padding: 40px 24px; }
        }

        /* API key gate overlay */
        .api-gate {
            position: fixed;
            inset: 0;
            background: rgba(14,14,13,0.95);
            backdrop-filter: blur(20px);
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 24px;
        }

        /* Receipt preview */
        .receipt-img {
            width: 100%;
            max-height: 300px;
            object-fit: contain;
            border-radius: var(--radius-sm);
            border: 1px solid var(--border-base);
        }

        /* Item row */
        .item-row {
            display: grid;
            grid-template-columns: 1fr 80px auto;
            gap: 12px;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid var(--border-divider);
        }
        .item-row:last-child { border-bottom: none; }

        /* Person assignment chips */
        .person-chip {
            display: inline-flex;
            align-items: center;
            gap: 7px;
            padding: 7px 14px;
            border-radius: var(--radius-full);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 120ms ease;
            border: 1px solid transparent;
            min-height: 36px;
        }
        .person-chip.assigned {
            border-color: currentColor;
        }

        /* Summary card */
        .summary-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid var(--border-divider);
        }
        .summary-row:last-child { border-bottom: none; }

        /* Mode indicator */
        .mode-pill {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 4px 12px;
            border-radius: var(--radius-full);
            font-size: 11px;
            font-weight: 600;
            letter-spacing: 0.01em;
            background: var(--surface-2);
            border: 1px solid var(--border-base);
            color: var(--text-secondary);
        }

        /* Transition wrapper */
        #app-content {
            transition: opacity 200ms ease, transform 200ms ease;
        }
    </style>
</head>
<body>
<div id="root"></div>

<script type="text/babel">

// ─── CONSTANTS ─────────────────────────────────────────────────────────────

const YOU_COLOR = '#22C55E'; // green for "You"
const PERSON_COLORS = [
    '#D42B2B', // red
    '#06B6D4', // cyan
    '#F59E0B', // amber
    '#8B5CF6', // purple
    '#EC4899', // pink
    '#14B8A6', // teal
    '#f97316', // orange
    '#6366F1', // indigo
];

const formatCurrency = (val) =>
    new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(isNaN(val) ? 0 : val);

const wait = (ms) => new Promise(r => setTimeout(r, ms));

const genId = () => Math.random().toString(36).slice(2, 9);

// ─── SVG ICONS ─────────────────────────────────────────────────────────────

const Icon = ({ name, size = 18, color = 'currentColor', className = '' }) => {
    const paths = {
        camera: <><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/><circle cx="12" cy="13" r="4"/></>,
        upload: <><polyline points="16 16 12 12 8 16"/><line x1="12" y1="12" x2="12" y2="21"/><path d="M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3"/></>,
        scan: <><path d="M3 7V5a2 2 0 0 1 2-2h2"/><path d="M17 3h2a2 2 0 0 1 2 2v2"/><path d="M21 17v2a2 2 0 0 1-2 2h-2"/><path d="M7 21H5a2 2 0 0 1-2-2v-2"/><line x1="7" y1="12" x2="17" y2="12"/></>,
        plus: <><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></>,
        minus: <line x1="5" y1="12" x2="19" y2="12"/>,
        x: <><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></>,
        check: <polyline points="20 6 9 17 4 12"/>,
        arrowLeft: <><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></>,
        arrowRight: <><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></>,
        users: <><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></>,
        receipt: <><path d="M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1z"/><line x1="8" y1="8" x2="16" y2="8"/><line x1="8" y1="12" x2="16" y2="12"/><line x1="8" y1="16" x2="12" y2="16"/></>,
        edit: <><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></>,
        trash: <><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></>,
        key: <><path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"/></>,
        sparkle: <><path d="M12 3L13.5 7.5L18 9L13.5 10.5L12 15L10.5 10.5L6 9L10.5 7.5Z"/><path d="M5 3L5.75 5.25L8 6L5.75 6.75L5 9L4.25 6.75L2 6L4.25 5.25Z"/><path d="M19 15L19.5 16.5L21 17L19.5 17.5L19 19L18.5 17.5L17 17L18.5 16.5Z"/></>,
        dollar: <><line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></>,
        percent: <><line x1="19" y1="5" x2="5" y2="19"/><circle cx="6.5" cy="6.5" r="2.5"/><circle cx="17.5" cy="17.5" r="2.5"/></>,
        sliders: <><line x1="4" y1="21" x2="4" y2="14"/><line x1="4" y1="10" x2="4" y2="3"/><line x1="12" y1="21" x2="12" y2="12"/><line x1="12" y1="8" x2="12" y2="3"/><line x1="20" y1="21" x2="20" y2="16"/><line x1="20" y1="12" x2="20" y2="3"/><line x1="1" y1="14" x2="7" y2="14"/><line x1="9" y1="8" x2="15" y2="8"/><line x1="17" y1="16" x2="23" y2="16"/></>,
        refresh: <><polyline points="23 4 23 10 17 10"/><polyline points="1 20 1 14 7 14"/><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/></>,
        info: <><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></>,
        home: <><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></>,
        copy: <><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></>,
        share: <><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/></>,
    };
    return (
        <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24"
            fill="none" stroke={color} strokeWidth="1.75" strokeLinecap="round" strokeLinejoin="round"
            className={className}>
            {paths[name] || paths.receipt}
        </svg>
    );
};

// ─── COMPONENTS ────────────────────────────────────────────────────────────

const Spinner = ({ size = 18 }) => (
    <svg className="spin" width={size} height={size} viewBox="0 0 24 24" fill="none"
        stroke="currentColor" strokeWidth="2" strokeLinecap="round">
        <path d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"
            strokeOpacity="0.3"/>
        <path d="M12 2v4" strokeOpacity="1"/>
    </svg>
);

const Button = ({ children, variant = 'primary', size = '', onClick, disabled, className = '', icon, iconRight, style }) => (
    <button
        className={`btn btn-${variant} ${size ? 'btn-' + size : ''} ${className}`}
        onClick={onClick}
        disabled={disabled}
        style={style}
    >
        {icon && <Icon name={icon} size={size === 'sm' ? 14 : size === 'xs' ? 12 : 16} />}
        {children}
        {iconRight && <Icon name={iconRight} size={16} />}
    </button>
);

const Input = ({ label, type = 'text', placeholder, value, onChange, prefix, suffix, autoFocus, onKeyDown, style }) => (
    <div className="input-wrap">
        {label && <label className="input-label">{label}</label>}
        <div style={{ position: 'relative' }}>
            {prefix && <span className="input-prefix">{prefix}</span>}
            <input
                type={type}
                className={`input-field ${prefix ? 'has-prefix' : ''}`}
                placeholder={placeholder}
                value={value}
                onChange={onChange}
                autoFocus={autoFocus}
                onKeyDown={onKeyDown}
                style={style}
            />
            {suffix && (
                <span style={{ position: 'absolute', right: 14, top: '50%', transform: 'translateY(-50%)', color: 'var(--text-tertiary)', fontSize: 13 }}>
                    {suffix}
                </span>
            )}
        </div>
    </div>
);

const Checkbox = ({ checked, onChange, label }) => (
    <div className="checkbox-wrap" onClick={onChange}>
        <div className={`checkbox ${checked ? 'checked' : ''}`}>
            {checked && <Icon name="check" size={11} color="#fff" />}
        </div>
        {label && <span style={{ fontSize: 14 }}>{label}</span>}
    </div>
);

// ─── API KEY GATE ──────────────────────────────────────────────────────────

const ApiKeyGate = ({ onSave }) => {
    const [key, setKey] = React.useState('');
    return (
        <div className="api-gate">
            <div className="card p-lg fade-up" style={{ maxWidth: 480, width: '100%' }}>
                <div className="flex items-center gap-sm mb-lg">
                    <div style={{ width: 48, height: 48, borderRadius: 12, background: 'var(--surface-3)', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>
                        <Icon name="key" size={22} color="var(--primary)" />
                    </div>
                    <div>
                        <h2 className="t-title">Connect to Claude</h2>
                        <p className="t-caption text-secondary mt-1">For AI-powered receipt scanning</p>
                    </div>
                </div>
                <p className="t-body text-secondary mb-md">
                The splitter uses Claude's vision to read receipts and extract line items automatically.
                    Your key is stored only in this browser session — never sent to any server.
                </p>
                <Input
                    label="Anthropic API Key"
                    placeholder="sk-ant-..."
                    value={key}
                    onChange={e => setKey(e.target.value)}
                    onKeyDown={e => e.key === 'Enter' && key.startsWith('sk-') && onSave(key)}
                />
                <div className="mt-md flex gap-sm">
                    <Button
                        className="flex-1"
                        onClick={() => onSave(key)}
                        disabled={!key.startsWith('sk-')}
                        icon="sparkle"
                    >
                        Activate OCR
                    </Button>
                    <Button variant="ghost" onClick={() => onSave(null)}>
                        Split manually
                    </Button>
                </div>
                <p className="t-caption text-tertiary mt-md text-center">
                    Don't have a key? <a href="https://console.anthropic.com" target="_blank" style={{ color: 'var(--primary)' }}>console.anthropic.com</a>
                </p>
            </div>
        </div>
    );
};

// ─── RECEIPT SCANNER ───────────────────────────────────────────────────────

const ReceiptScanner = ({ apiKey, onComplete, onManual }) => {
    const [dragOver, setDragOver] = React.useState(false);
    const [preview, setPreview] = React.useState(null);
    const [imageData, setImageData] = React.useState(null);
    const [scanning, setScanning] = React.useState(false);
    const [error, setError] = React.useState(null);
    const fileRef = React.useRef();

    const handleFile = (file) => {
        if (!file || !file.type.startsWith('image/')) return;
        const reader = new FileReader();
        reader.onload = (e) => {
            setPreview(e.target.result);
            setImageData(e.target.result.split(',')[1]);
            setError(null);
        };
        reader.readAsDataURL(file);
    };

    const handleDrop = (e) => {
        e.preventDefault();
        setDragOver(false);
        handleFile(e.dataTransfer.files[0]);
    };

    const scanReceipt = async () => {
        if (!imageData || !apiKey) return;
        setScanning(true);
        setError(null);
        try {
            const res = await fetch('https://api.anthropic.com/v1/messages', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json', 'x-api-key': apiKey, 'anthropic-version': '2023-06-01', 'anthropic-dangerous-direct-browser-access': 'true' },
                body: JSON.stringify({
                    model: 'claude-opus-4-6',
                    max_tokens: 1500,
                    messages: [{
                        role: 'user',
                        content: [
                            {
                                type: 'image',
                                source: { type: 'base64', media_type: 'image/jpeg', data: imageData }
                            },
                            {
                                type: 'text',
                                text: `Extract this restaurant receipt into JSON. Return ONLY valid JSON, nothing else.
Format:
{
  "restaurant": "Restaurant Name",
  "date": "date string or null",
  "items": [
    { "name": "Item Name", "price": 12.50 }
  ],
  "subtotal": 45.00,
  "tax": 3.60,
  "tip": 8.00,
  "total": 56.60
}
Rules:
- Each item must have a name and a numeric price
- If subtotal/tax/tip aren't shown, calculate or set to 0
- All prices must be numbers, not strings
- Include every line item on the receipt`
                            }
                        ]
                    }]
                })
            });
            if (!res.ok) {
                const err = await res.json();
                throw new Error(err.error?.message || 'API error');
            }
            const data = await res.json();
            const text = data.content[0].text;
            const clean = text.replace(/```json|```/g, '').trim();
            const parsed = JSON.parse(clean);
            onComplete({ ...parsed, imagePreview: preview });
        } catch (err) {
            setError(err.message.includes('parse') ? 'Could not read receipt. Try manual entry.' : err.message);
        } finally {
            setScanning(false);
        }
    };

    return (
        <div className="fade-up">
            {!preview ? (
                <div
                    className={`upload-zone ${dragOver ? 'drag-over' : ''}`}
                    onDragOver={(e) => { e.preventDefault(); setDragOver(true); }}
                    onDragLeave={() => setDragOver(false)}
                    onDrop={handleDrop}
                    onClick={() => fileRef.current?.click()}
                >
                    <input
                        ref={fileRef}
                        type="file"
                        accept="image/*"
                        style={{ display: 'none' }}
                        onChange={e => handleFile(e.target.files[0])}
                    />
                    <div style={{ width: 56, height: 56, borderRadius: 14, background: 'var(--surface-2)', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>
                        <Icon name="camera" size={26} color="var(--primary)" />
                    </div>
                    <div>
                        <p className="t-body" style={{ fontWeight: 500 }}>Drop receipt photo here</p>
                        <p className="t-caption text-secondary mt-1">tap to take a photo or choose from your gallery</p>
                    </div>
                    <div className="flex gap-sm wrap justify-center">
                        <span className="badge badge-neutral">JPG</span>
                        <span className="badge badge-neutral">PNG</span>
                        <span className="badge badge-neutral">HEIC</span>
                        <span className="badge badge-neutral">WEBP</span>
                    </div>
                </div>
            ) : (
                <div>
                    <img src={preview} alt="Receipt" className="receipt-img mb-md" />
                    {error && (
                        <div className="card p-sm mb-md" style={{ borderColor: 'rgba(239,68,68,0.3)', background: 'rgba(239,68,68,0.06)' }}>
                            <p className="t-caption text-error">{error}</p>
                        </div>
                    )}
                    <div className="flex gap-sm">
                        <Button
                            className="flex-1"
                            onClick={scanReceipt}
                            disabled={scanning || !apiKey}
                            icon={scanning ? null : 'sparkle'}
                        >
                            {scanning ? <><Spinner size={16} />&nbsp;&nbsp;Reading receipt…</> : 'Scan with Claude AI'}
                        </Button>
                        <Button variant="secondary" onClick={() => { setPreview(null); setImageData(null); setError(null); }}>
                            Retake
                        </Button>
                    </div>
                    {!apiKey && (
                        <p className="t-caption text-tertiary text-center mt-sm">
                            No API key — <button style={{ color: 'var(--primary)', background: 'none', border: 'none', cursor: 'pointer', fontSize: 12 }} onClick={onManual}>enter items manually</button>
                        </p>
                    )}
                </div>
            )}
            <div className="flex items-center gap-sm mt-md">
                <div className="divider" />
                <span className="t-caption text-tertiary" style={{ whiteSpace: 'nowrap', flexShrink: 0 }}>or</span>
                <div className="divider" />
            </div>
            <Button variant="ghost" className="w-full mt-sm" icon="edit" onClick={onManual}>
                Enter items manually
            </Button>
        </div>
    );
};

// ─── MANUAL ENTRY ──────────────────────────────────────────────────────────

const ManualEntry = ({ initial, onComplete }) => {
    const [restaurant, setRestaurant] = React.useState(initial?.restaurant || '');
    const [items, setItems] = React.useState(
        initial?.items?.length ? initial.items.map(i => ({ ...i, id: genId() }))
            : [{ id: genId(), name: '', price: '' }]
    );
    const [tax, setTax] = React.useState(initial?.tax || '');
    const [tip, setTip] = React.useState(initial?.tip || '');

    const addItem = () => setItems(prev => [...prev, { id: genId(), name: '', price: '' }]);
    const removeItem = (id) => setItems(prev => prev.filter(i => i.id !== id));
    const updateItem = (id, field, val) => setItems(prev => prev.map(i => i.id === id ? { ...i, [field]: val } : i));

    const subtotal = items.reduce((sum, i) => sum + (parseFloat(i.price) || 0), 0);
    const total = subtotal + (parseFloat(tax) || 0) + (parseFloat(tip) || 0);

    const canSubmit = items.some(i => i.name && i.price);

    const handleSubmit = () => {
        const validItems = items.filter(i => i.name && parseFloat(i.price) > 0)
            .map(i => ({ name: i.name, price: parseFloat(i.price) }));
        onComplete({
            restaurant: restaurant || 'Dinner',
            items: validItems,
            subtotal,
            tax: parseFloat(tax) || 0,
            tip: parseFloat(tip) || 0,
            total
        });
    };

    return (
        <div className="fade-up">
            <Input
                label="Restaurant name"
                placeholder="e.g. The French Laundry"
                value={restaurant}
                onChange={e => setRestaurant(e.target.value)}
            />

            <div className="mt-md mb-xs flex justify-between items-center">
                <span className="input-label">Line items</span>
                <Button variant="ghost" size="xs" icon="plus" onClick={addItem}>Add item</Button>
            </div>

            <div className="card p-sm" style={{ marginBottom: 16 }}>
                {items.map((item, idx) => (
                    <div key={item.id} className="flex gap-sm items-center" style={{ marginBottom: idx < items.length - 1 ? 10 : 0 }}>
                        <input
                            className="input-field flex-1"
                            style={{ height: 44 }}
                            placeholder={`Item ${idx + 1}`}
                            value={item.name}
                            onChange={e => updateItem(item.id, 'name', e.target.value)}
                        />
                        <div style={{ position: 'relative', width: 96 }}>
                            <span className="input-prefix" style={{ left: 10 }}>$</span>
                            <input
                                className="input-field has-prefix"
                                style={{ height: 44, paddingLeft: 24 }}
                                type="number"
                                placeholder="0.00"
                                value={item.price}
                                onChange={e => updateItem(item.id, 'price', e.target.value)}
                            />
                        </div>
                        {items.length > 1 && (
                            <button
                                className="btn btn-ghost btn-icon"
                                style={{ height: 44, width: 36, color: 'var(--text-tertiary)' }}
                                onClick={() => removeItem(item.id)}
                            >
                                <Icon name="x" size={14} />
                            </button>
                        )}
                    </div>
                ))}
            </div>

            <div className="grid-2" style={{ marginBottom: 24 }}>
                <Input label="Tax" type="number" placeholder="0.00" prefix="$" value={tax} onChange={e => setTax(e.target.value)} />
                <Input label="Tip" type="number" placeholder="0.00" prefix="$" value={tip} onChange={e => setTip(e.target.value)} />
            </div>

            <div className="card p-sm mb-md" style={{ background: 'var(--surface-2)' }}>
                <div className="flex justify-between t-caption text-secondary mb-xs">
                    <span>Subtotal</span><span>{formatCurrency(subtotal)}</span>
                </div>
                <div className="flex justify-between t-body" style={{ fontWeight: 600 }}>
                    <span>Total</span><span>{formatCurrency(total)}</span>
                </div>
            </div>

            <Button className="w-full" onClick={handleSubmit} disabled={!canSubmit} icon="arrowRight" iconRight="arrowRight">
                Set up the split
            </Button>
        </div>
    );
};

// ─── PEOPLE SETUP ──────────────────────────────────────────────────────────

const PeopleSetup = ({ onComplete, initialPeople }) => {
    const [people, setPeople] = React.useState(initialPeople || [
        { id: genId(), name: 'You', color: YOU_COLOR }
    ]);
    const [newName, setNewName] = React.useState('');

    const addPerson = () => {
        if (!newName.trim()) return;
        // Count non-You people to pick next color
        const othersCount = people.filter(p => p.name !== 'You').length;
        setPeople(prev => [...prev, {
            id: genId(),
            name: newName.trim(),
            color: PERSON_COLORS[othersCount % PERSON_COLORS.length]
        }]);
        setNewName('');
    };

    const removePerson = (id) => {
        if (people.length <= 1) return;
        setPeople(prev => prev.filter(p => p.id !== id));
    };

    return (
        <div className="fade-up">
            <p className="t-body text-secondary mb-md">
                Add everyone at the table. You'll assign items to them in the next step.
            </p>

            <div className="flex flex-col gap-sm mb-md" style={{ width: '100%' }}>
                {people.map((person, i) => (
                    <div key={person.id} className="card p-sm flex items-center justify-between fade-up" style={{ animationDelay: `${i * 40}ms`, minWidth: 0, overflow: 'hidden' }}>
                        <div className="flex items-center gap-sm" style={{ minWidth: 0, overflow: 'hidden' }}>
                            <div style={{ width: 10, height: 10, borderRadius: '50%', background: person.color, flexShrink: 0 }} />
                            <span style={{ fontWeight: 500, overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap' }}>{person.name}</span>
                        </div>
                        {person.name !== 'You' && (
                            <button className="btn btn-ghost btn-icon btn-sm" style={{ color: 'var(--text-tertiary)', flexShrink: 0 }} onClick={() => removePerson(person.id)}>
                                <Icon name="x" size={14} />
                            </button>
                        )}
                    </div>
                ))}
            </div>

            <div className="flex gap-sm mb-lg">
                <div style={{ flex: 1, position: 'relative' }}>
                    <input
                        className="input-field"
                        placeholder="Add person (e.g. Jordan)"
                        value={newName}
                        onChange={e => setNewName(e.target.value)}
                        onKeyDown={e => e.key === 'Enter' && addPerson()}
                        style={{ height: 52, fontSize: 16 }}
                    />
                </div>
                <Button variant="secondary" onClick={addPerson} disabled={!newName.trim()} icon="plus">
                    Add
                </Button>
            </div>

            <Button
                className="w-full"
                onClick={() => onComplete(people)}
                disabled={people.length < 1}
                icon="arrowRight"
                iconRight="arrowRight"
            >
                Split the bill
            </Button>
        </div>
    );
};

// ─── SPLIT EDITOR ──────────────────────────────────────────────────────────

const SplitEditor = ({ receipt, people, onComplete }) => {
    const [splitMode, setSplitMode] = React.useState('item'); // item | custom | percent
    // item assignments: { itemIdx: [personId] }
    const [assignments, setAssignments] = React.useState({});
    // custom: { personId: amount }
    const [customAmounts, setCustomAmounts] = React.useState(() =>
        Object.fromEntries(people.map(p => [p.id, '']))
    );
    // percent: { personId: percent }
    const [percents, setPercents] = React.useState(() => {
        const even = (100 / people.length).toFixed(1);
        return Object.fromEntries(people.map(p => [p.id, even]));
    });

    const [tipMode, setTipMode] = React.useState('even'); // even | proportional
    const [tip, setTip] = React.useState(receipt.tip || 0);
    const [tax, setTax] = React.useState(receipt.tax || 0);

    const subtotal = receipt.items.reduce((s, i) => s + i.price, 0);
    const total = subtotal + (parseFloat(tax) || 0) + (parseFloat(tip) || 0);

    // Toggle person on item
    const toggleAssign = (itemIdx, personId) => {
        setAssignments(prev => {
            const current = prev[itemIdx] || [];
            const next = current.includes(personId)
                ? current.filter(id => id !== personId)
                : [...current, personId];
            return { ...prev, [itemIdx]: next };
        });
    };

    // Assign item to all
    const assignAll = (itemIdx) => {
        setAssignments(prev => ({ ...prev, [itemIdx]: people.map(p => p.id) }));
    };

    // Compute per-person totals (item mode)
    const computeItemSplit = () => {
        const shares = Object.fromEntries(people.map(p => [p.id, 0]));
        receipt.items.forEach((item, idx) => {
            const assigned = assignments[idx] || [];
            if (assigned.length === 0) return;
            const share = item.price / assigned.length;
            assigned.forEach(id => { shares[id] = (shares[id] || 0) + share; });
        });
        // Add tax & tip
        const taxTotal = parseFloat(tax) || 0;
        const tipTotal = parseFloat(tip) || 0;
        const extras = taxTotal + tipTotal;
        const itemSubtotals = Object.fromEntries(people.map(p => [p.id, shares[p.id] || 0]));
        const assignedSubtotal = Object.values(itemSubtotals).reduce((a, b) => a + b, 0);
        people.forEach(p => {
            const proportion = assignedSubtotal > 0 ? (itemSubtotals[p.id] / assignedSubtotal) : (1 / people.length);
            shares[p.id] = (itemSubtotals[p.id] || 0) + (extras * proportion);
        });
        return shares;
    };

    const computeCustomSplit = () => {
        return Object.fromEntries(people.map(p => [p.id, parseFloat(customAmounts[p.id]) || 0]));
    };

    const computePercentSplit = () => {
        return Object.fromEntries(people.map(p => [p.id, total * ((parseFloat(percents[p.id]) || 0) / 100)]));
    };

    const getShares = () => {
        if (splitMode === 'item') return computeItemSplit();
        return computePercentSplit();
    };

    const shares = getShares();
    const totalAssigned = Object.values(shares).reduce((a, b) => a + b, 0);
    const unassignedItems = receipt.items.filter((_, idx) => !(assignments[idx]?.length > 0)).length;

    const personById = Object.fromEntries(people.map(p => [p.id, p]));

    const percentTotal = people.reduce((sum, p) => sum + (parseFloat(percents[p.id]) || 0), 0);

    const handleComplete = () => {
        onComplete({
            people,
            shares: getShares(),
            receipt: { ...receipt, tax: parseFloat(tax) || 0, tip: parseFloat(tip) || 0, total },
            splitMode
        });
    };

    const canComplete = splitMode === 'item'
        ? unassignedItems === 0
        : Math.abs(percentTotal - 100) < 0.1;

    return (
        <div className="fade-up">
            {/* Receipt summary */}
            <div className="card p-sm mb-md" style={{ background: 'var(--surface-2)' }}>
                <div className="flex justify-between items-center">
                    <div>
                        <p className="t-label text-secondary">{receipt.restaurant}</p>
                        <p className="t-title mt-1">{formatCurrency(total)}</p>
                    </div>
                    <div className="flex gap-sm">
                        <div className="text-right">
                            <p className="t-caption text-tertiary">Tax</p>
                            <p className="t-body" style={{ fontWeight: 500 }}>
                                <span style={{ cursor: 'pointer', borderBottom: '1px dashed var(--border-hover)' }}>
                                    {formatCurrency(parseFloat(tax) || 0)}
                                </span>
                            </p>
                        </div>
                        <div className="text-right">
                            <p className="t-caption text-tertiary">Tip</p>
                            <p className="t-body" style={{ fontWeight: 500, cursor: 'pointer', borderBottom: '1px dashed var(--border-hover)' }}>
                                {formatCurrency(parseFloat(tip) || 0)}
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            {/* Tax / tip adjusters */}
            <div className="grid-2 mb-md">
                <Input label="Tax" type="number" placeholder="0.00" prefix="$"
                    value={tax} onChange={e => setTax(e.target.value)} />
                <Input label="Tip" type="number" placeholder="0.00" prefix="$"
                    value={tip} onChange={e => setTip(e.target.value)} />
            </div>

            {/* Split mode tabs */}
            <div className="mb-md">
                <p className="input-label mb-xs">Split method</p>
                <div className="tab-bar">
                    <button className={`tab ${splitMode === 'item' ? 'active' : ''}`} onClick={() => setSplitMode('item')}>
                        <Icon name="receipt" size={13} />&nbsp; Itemized
                    </button>
                    <button className={`tab ${splitMode === 'percent' ? 'active' : ''}`} onClick={() => setSplitMode('percent')}>
                        <Icon name="percent" size={13} />&nbsp; By Percentage
                    </button>
                </div>
            </div>

            {/* ── ITEM MODE ── */}
            {splitMode === 'item' && (
                <div className="card mb-md">
                    {unassignedItems > 0 && (
                        <div className="p-sm" style={{ background: 'rgba(245,158,11,0.07)', borderBottom: '1px solid var(--border-divider)' }}>
                            <p className="t-caption" style={{ color: 'var(--warning)' }}>
                                {unassignedItems} item{unassignedItems > 1 ? 's' : ''} not yet assigned
                            </p>
                        </div>
                    )}
                    <div className="p-sm">
                        {receipt.items.map((item, idx) => {
                            const assigned = assignments[idx] || [];
                            return (
                                <div key={idx} className="item-row">
                                    <div>
                                        <p style={{ fontWeight: 500, fontSize: 14 }}>{item.name}</p>
                                        <div className="flex gap-xs wrap mt-1">
                                            {people.map(p => {
                                                const isOn = assigned.includes(p.id);
                                                return (
                                                    <button
                                                        key={p.id}
                                                        className={`person-chip ${isOn ? 'assigned' : ''}`}
                                                        style={{
                                                            color: isOn ? p.color : 'var(--text-tertiary)',
                                                            background: isOn ? p.color + '18' : 'transparent',
                                                            borderColor: isOn ? p.color + '60' : 'var(--border-base)'
                                                        }}
                                                        onClick={() => toggleAssign(idx, p.id)}
                                                    >
                                                        <span style={{ width: 6, height: 6, borderRadius: '50%', background: isOn ? p.color : 'var(--text-disabled)', flexShrink: 0, display: 'inline-block' }} />
                                                        {p.name}
                                                    </button>
                                                );
                                            })}
                                            <button
                                                className="person-chip"
                                                style={{ color: 'var(--text-tertiary)', borderColor: 'var(--border-base)' }}
                                                onClick={() => assignAll(idx)}
                                            >
                                                All
                                            </button>
                                        </div>
                                    </div>
                                    <div className="text-right">
                                        <p style={{ fontWeight: 600, fontSize: 14 }}>{formatCurrency(item.price)}</p>
                                        {assigned.length > 1 && (
                                            <p className="t-caption text-tertiary">{formatCurrency(item.price / assigned.length)} each</p>
                                        )}
                                    </div>
                                    <div style={{ width: 4 }}></div>
                                </div>
                            );
                        })}
                    </div>
                </div>
            )}

            {/* ── PERCENT MODE ── */}
            {splitMode === 'percent' && (
                <div className="card p-sm mb-md">
                    <p className="t-caption text-secondary mb-sm">
                        Set the percentage each person covers. Must total 100%.
                    </p>
                    {people.map(p => (
                        <div key={p.id} className="flex items-center gap-sm mb-sm">
                            <div className="avatar" style={{ background: p.color + '20', color: p.color, borderColor: p.color + '40', flexShrink: 0 }}>
                                {p.name.substring(0, 2).toUpperCase()}
                            </div>
                            <div style={{ flex: 1 }}>
                                <p style={{ fontSize: 14, fontWeight: 500 }}>{p.name}</p>
                                <p className="t-caption text-tertiary">{formatCurrency(total * ((parseFloat(percents[p.id]) || 0) / 100))}</p>
                            </div>
                            <div style={{ position: 'relative', width: 110 }}>
                                <input
                                    className="input-field"
                                    type="number"
                                    style={{ height: 44, paddingRight: 28, textAlign: 'right' }}
                                    placeholder="0"
                                    value={percents[p.id]}
                                    onChange={e => setPercents(prev => ({ ...prev, [p.id]: e.target.value }))}
                                />
                                <span style={{ position: 'absolute', right: 12, top: '50%', transform: 'translateY(-50%)', color: 'var(--text-tertiary)', fontSize: 13 }}>%</span>
                            </div>
                        </div>
                    ))}
                    <div className={`flex justify-between p-sm`} style={{
                        background: Math.abs(percentTotal - 100) < 0.1 ? 'rgba(34,197,94,0.08)' : 'rgba(245,158,11,0.08)',
                        borderRadius: 8
                    }}>
                        <span className="t-caption text-secondary">Total %</span>
                        <span className={`t-caption ${Math.abs(percentTotal - 100) < 0.1 ? 'text-success' : ''}`} style={{ fontWeight: 600 }}>
                            {percentTotal.toFixed(1)}%
                        </span>
                    </div>
                </div>
            )}

            {/* Live preview */}
            <div className="card p-sm mb-md" style={{ background: 'rgba(212,43,43,0.04)', borderColor: 'rgba(212,43,43,0.15)' }}>
                <p className="input-label mb-sm">Live preview</p>
                {people.map(p => (
                    <div key={p.id} className="summary-row">
                        <div className="flex items-center gap-sm">
                            <div style={{ width: 8, height: 8, borderRadius: '50%', background: p.color }} />
                            <span style={{ fontSize: 14 }}>{p.name}</span>
                        </div>
                        <span style={{ fontWeight: 600, fontSize: 15, color: p.color }}>
                            {formatCurrency(shares[p.id] || 0)}
                        </span>
                    </div>
                ))}
            </div>

            <Button
                className="w-full"
                onClick={handleComplete}
                disabled={!canComplete}
                icon="check"
            >
                Calculate final split
            </Button>
            {!canComplete && splitMode === 'item' && unassignedItems > 0 && (
                <p className="t-caption text-tertiary text-center mt-sm">Assign all items to continue</p>
            )}
        </div>
    );
};

// ─── SUMMARY ───────────────────────────────────────────────────────────────

const Summary = ({ result, onNew, onBack }) => {
    const { people, shares, receipt, splitMode } = result;
    const [copied, setCopied] = React.useState(false);
    const [copiedPerson, setCopiedPerson] = React.useState(null);

    const personById = Object.fromEntries(people.map(p => [p.id, p]));
    // Sort by amount descending, but always put "You" last
    const sorted = [...people].sort((a, b) => {
        if (a.name === 'You') return 1;
        if (b.name === 'You') return -1;
        return (shares[b.id] || 0) - (shares[a.id] || 0);
    });

    const summaryText = `${receipt.restaurant} — ${new Date().toLocaleDateString()}\nTotal: ${formatCurrency(receipt.total)}\n\n` +
        sorted.map(p => `${p.name}: ${formatCurrency(shares[p.id] || 0)}`).join('\n');

    const copyToClipboard = async () => {
        try {
            await navigator.clipboard.writeText(summaryText);
            setCopied(true);
            setTimeout(() => setCopied(false), 2000);
        } catch {}
    };

    const copyAmountForVenmo = async (person, amount) => {
        try {
            await navigator.clipboard.writeText(amount.toFixed(2));
            setCopiedPerson(person.id);
            setTimeout(() => setCopiedPerson(null), 2000);
        } catch {}
    };

    const maxShare = Math.max(...Object.values(shares));

    return (
        <div className="fade-up">
            {/* Back button */}
            <div className="mb-md">
                <button className="btn btn-ghost btn-sm" onClick={onBack} style={{ color: 'var(--text-tertiary)', paddingLeft: 0 }}>
                    <Icon name="arrowLeft" size={14} /> Back
                </button>
            </div>

            {/* Hero */}
            <div className="card p-lg mb-md text-center" style={{
                background: 'linear-gradient(135deg, rgba(212,43,43,0.07) 0%, rgba(10,10,10,0.04) 100%)',
                borderColor: 'rgba(212,43,43,0.2)'
            }}>
                <p className="t-label text-secondary mb-sm">{receipt.restaurant}</p>
                <p className="t-display" style={{ fontStyle: 'italic', color: 'var(--text-primary)' }}>
                    {formatCurrency(receipt.total)}
                </p>
                <p className="t-caption text-tertiary mt-sm">
                    Split {splitMode === 'item' ? 'itemized' : 'by percentage'} among {people.length} people
                </p>
            </div>

            {/* Breakdown */}
            <div className="card mb-md">
                <div className="p-sm" style={{ borderBottom: '1px solid var(--border-divider)' }}>
                    <div className="flex items-center justify-between">
                        <p className="input-label">What everyone owes</p>
                        <p className="t-caption text-tertiary">tap to copy</p>
                    </div>
                </div>
                {sorted.map((p, i) => {
                    const amount = shares[p.id] || 0;
                    const barWidth = maxShare > 0 ? (amount / maxShare) * 100 : 0;
                    const isCopied = copiedPerson === p.id;
                    return (
                        <div key={p.id} className="p-sm fade-up" style={{ animationDelay: `${i * 60}ms`, borderBottom: i < sorted.length - 1 ? '1px solid var(--border-divider)' : 'none' }}>
                            <div className="flex items-center justify-between mb-xs">
                                <div className="flex items-center gap-sm">
                                    <div style={{ width: 10, height: 10, borderRadius: '50%', background: p.color, flexShrink: 0 }} />
                                    <span style={{ fontWeight: 500, color: 'var(--text-primary)' }}>{p.name}</span>
                                </div>
                                <button
                                    onClick={() => copyAmountForVenmo(p, amount)}
                                    style={{
                                        background: isCopied ? p.color + '20' : 'transparent',
                                        border: `1px solid ${isCopied ? p.color + '60' : 'transparent'}`,
                                        borderRadius: 8,
                                        padding: '6px 10px',
                                        cursor: 'pointer',
                                        display: 'flex',
                                        alignItems: 'center',
                                        gap: 6,
                                        transition: 'all 160ms ease',
                                        color: p.color
                                    }}
                                >
                                    {isCopied
                                        ? <><Icon name="check" size={13} color={p.color} /><span style={{ fontWeight: 700, fontSize: 18 }}>{formatCurrency(amount)}</span></>
                                        : <><span style={{ fontWeight: 700, fontSize: 18 }}>{formatCurrency(amount)}</span><Icon name="copy" size={13} color="var(--text-tertiary)" /></>
                                    }
                                </button>
                            </div>
                            <div style={{ height: 3, background: 'var(--surface-3)', borderRadius: 2, overflow: 'hidden' }}>
                                <div style={{
                                    height: '100%',
                                    width: barWidth + '%',
                                    background: `linear-gradient(90deg, ${p.color}, ${p.color}99)`,
                                    borderRadius: 2,
                                    transition: 'width 600ms cubic-bezier(0,0,0.2,1)',
                                    transitionDelay: `${i * 80}ms`
                                }} />
                            </div>
                        </div>
                    );
                })}
            </div>

            {/* Receipt detail */}
            <div className="card p-sm mb-md" style={{ background: 'var(--surface-2)' }}>
                <p className="input-label mb-sm">Receipt</p>
                {receipt.items.map((item, i) => (
                    <div key={i} className="flex justify-between t-caption text-secondary py-1">
                        <span>{item.name}</span>
                        <span>{formatCurrency(item.price)}</span>
                    </div>
                ))}
                <div className="divider mt-sm mb-sm" />
                <div className="flex justify-between t-caption text-secondary mb-xs">
                    <span>Subtotal</span><span>{formatCurrency(receipt.subtotal || receipt.items.reduce((s,i) => s + i.price, 0))}</span>
                </div>
                {receipt.tax > 0 && (
                    <div className="flex justify-between t-caption text-secondary mb-xs">
                        <span>Tax</span><span>{formatCurrency(receipt.tax)}</span>
                    </div>
                )}
                {receipt.tip > 0 && (
                    <div className="flex justify-between t-caption text-secondary mb-xs">
                        <span>Tip</span><span>{formatCurrency(receipt.tip)}</span>
                    </div>
                )}
                <div className="flex justify-between t-body mt-xs" style={{ fontWeight: 700 }}>
                    <span>Total</span><span>{formatCurrency(receipt.total)}</span>
                </div>
            </div>

            {/* Actions */}
            <div className="flex gap-sm mb-sm">
                <Button className="flex-1" variant="secondary" icon={copied ? 'check' : 'copy'} onClick={copyToClipboard}>
                    {copied ? 'Copied!' : 'Copy summary'}
                </Button>
                <Button className="flex-1" variant="secondary" icon="share" onClick={() => {
                    if (navigator.share) navigator.share({ title: 'The Splitter', text: summaryText });
                }}>
                    Share
                </Button>
            </div>

            <Button className="w-full" icon="plus" onClick={onNew}>
                Split another bill
            </Button>
        </div>
    );
};

// ─── MAIN APP ──────────────────────────────────────────────────────────────

const STEPS = ['scan', 'items', 'people', 'split', 'summary'];

const App = () => {
    const [apiKey, setApiKey] = React.useState(null);
    const [showApiGate, setShowApiGate] = React.useState(true);
    const [step, setStep] = React.useState('scan'); // scan → items → people → split → summary
    const [receipt, setReceipt] = React.useState(null);
    const [people, setPeople] = React.useState(null);
    const [result, setResult] = React.useState(null);
    const [transitioning, setTransitioning] = React.useState(false);

    const navigate = (target) => {
        setTransitioning(true);
        setTimeout(() => {
            setStep(target);
            setTransitioning(false);
        }, 180);
    };

    const handleApiKey = (key) => {
        setApiKey(key);
        setShowApiGate(false);
    };

    const handleReceiptScanned = (data) => {
        setReceipt(data);
        navigate('people');
    };

    const handleManual = () => {
        navigate('items');
    };

    const handleManualComplete = (data) => {
        setReceipt(data);
        navigate('people');
    };

    const handlePeopleComplete = (p) => {
        setPeople(p);
        navigate('split');
    };

    const handleSplitComplete = (res) => {
        setResult(res);
        navigate('summary');
    };

    const handleNew = () => {
        setReceipt(null);
        setPeople(null);
        setResult(null);
        navigate('scan');
    };

    const stepIndex = STEPS.indexOf(step);
    const stepLabel = {
        scan: 'Capture receipt',
        items: 'Edit items',
        people: "Who's at the table?",
        split: 'Split it up',
        summary: 'Done'
    }[step];

    // Only show subtext on summary (restaurant name) and items
    const stepDesc = {
        items: 'Review & adjust',
        summary: receipt?.restaurant || ''
    }[step] || null;

    return (
        <>
            {showApiGate && <ApiKeyGate onSave={handleApiKey} />}

            <div className="container" style={{ paddingTop: 48, paddingBottom: 120 }}>
                {/* Header */}
                <header className="flex items-center justify-between mb-xl">
                    <div>
                        <h1 style={{ fontFamily: 'var(--font-serif)', fontSize: 28, fontWeight: 300, letterSpacing: '-0.01em', display: 'flex', alignItems: 'center', gap: 10 }}>
                            <img src="data:image/png;base64,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MhnHioqiZQAANTX2Q9wAXpJMkoiIoXBTdNeuf90GAKDRKavKy88dYo/Plzjw9P0lzi0pLS9abrUbjjNMq04jCALefvvt6ZHWUHN3dyetUFT+jEF/XNxWyySX4GptjYRzck7eDgBgsuiVlZVluzkLwld48vR9JwIRBeKlSwfrDCqHQlFxByISCxYsEDU1NRQiIlZVlT8KAKKmZi87lj2eoCgygYgYDAaCx44du5Fxi4xKaVnxlhT3iWd+nv53guGCgjNPanUqKwCANDd3EiKiVqt6n9H8tRp2nlDv9r6GRp+GXexNWK3m6oqKsu3s8UQ88/P0PykEckVFWWWldAUAADdS0mIyvXneaqZoS6fZanwHACCvPG+8yay3V1aWbeGZn6f/WeKqaD/7bOtMrba6nu34gs2bN09vaQkhRVHY1hZ119fXfrh27drxAADBYNNDFqux/mxxwWqe+Xn6wViBoqLCVSazrrrSVjmccY2yrykqKrqce11NjfXWujpXtsmsU3Obby6Fbi5esi8RISAIgiosPPPO5CmTHiUEohPdne1mmkZhRsaI2UKRaCFNkaNaWsJ7Fy68958AgFKpVLRo0SKSFwCefihCICAIgt62bdtN11137S+HDE2fSoAQSJLyt7SEZQ8++EghANAEQQBN0wKCIGj+qvH0g3SHBtSE7DBhXiny9IMPjLn1RswPv+KIJ5544oknnnjiiSeeeOKJJ5544oknnnjiiSeeeOKJJ5544oknnnji6QdC/w914IGHHBgbGAAAAABJRU5ErkJggg==" alt="" style={{ width: 96, height: 96, borderRadius: 0 }} />
                            <span style={{ fontStyle: 'italic', color: 'var(--text-tertiary)', fontSize: 20, fontWeight: 300 }}>
                                / the splitter
                            </span>
                        </h1>
                    </div>
                    <button
                        onClick={() => setShowApiGate(true)}
                        className="btn btn-ghost btn-sm"
                        style={{ color: 'var(--text-tertiary)', gap: 6 }}
                    >
                        <Icon name="key" size={13} />
                        <span className="hide-mobile">API key</span>
                    </button>
                </header>

                {/* Step indicator */}
                {step !== 'summary' && (
                    <div className="mb-lg fade-in">
                        {/* Progress dots */}
                        <div className="flex items-center gap-sm mb-md">
                            {STEPS.filter(s => s !== 'summary').map((s, i) => (
                                <React.Fragment key={s}>
                                    <div style={{
                                        width: 8, height: 8, borderRadius: '50%',
                                        background: i < stepIndex ? 'var(--primary)' : i === stepIndex ? 'var(--accent)' : 'var(--surface-3)',
                                        transition: 'background 300ms ease',
                                        flexShrink: 0
                                    }} />
                                    {i < STEPS.filter(s => s !== 'summary').length - 1 && (
                                        <div style={{
                                            flex: 1, height: 1,
                                            background: i < stepIndex ? 'var(--primary)' : 'var(--border-divider)',
                                            transition: 'background 300ms ease'
                                        }} />
                                    )}
                                </React.Fragment>
                            ))}
                        </div>
                        <div className="flex items-end justify-between step-header">
                            <div>
                                <h2 className="t-headline">{stepLabel}</h2>
                                {stepDesc && <p className="t-body text-secondary mt-1">{stepDesc}</p>}
                            </div>
                            <div className="flex gap-sm items-center">
                                <button
                                    className="btn btn-ghost btn-sm"
                                    onClick={() => {
                                        if (step === 'scan') handleNew();
                                        else if (step === 'items') navigate('scan');
                                        else if (step === 'people') navigate(receipt ? 'scan' : 'items');
                                        else if (step === 'split') navigate('people');
                                    }}
                                    style={{ color: 'var(--text-tertiary)', flexShrink: 0 }}
                                >
                                    <Icon name="arrowLeft" size={14} /> Back
                                </button>
                                {step === 'scan' && receipt && (
                                    <button
                                        className="btn btn-ghost btn-sm"
                                        onClick={() => navigate('people')}
                                        style={{ color: 'var(--primary)', flexShrink: 0 }}
                                    >
                                        Continue <Icon name="arrowRight" size={14} />
                                    </button>
                                )}
                            </div>
                        </div>
                    </div>
                )}

                {/* Content */}
                <div id="app-content" style={{ opacity: transitioning ? 0 : 1, transform: transitioning ? 'translateY(8px)' : 'translateY(0)', transition: 'opacity 180ms ease, transform 180ms ease' }}>
                    {step === 'scan' && (
                        <ReceiptScanner
                            apiKey={apiKey}
                            onComplete={handleReceiptScanned}
                            onManual={handleManual}
                        />
                    )}
                    {step === 'items' && (
                        <ManualEntry
                            initial={receipt}
                            onComplete={handleManualComplete}
                        />
                    )}
                    {step === 'people' && (
                        <PeopleSetup onComplete={handlePeopleComplete} initialPeople={people} />
                    )}
                    {step === 'split' && receipt && people && (
                        <SplitEditor
                            receipt={receipt}
                            people={people}
                            onComplete={handleSplitComplete}
                        />
                    )}
                    {step === 'summary' && result && (
                        <Summary result={result} onNew={handleNew} onBack={() => navigate('split')} />
                    )}
                </div>
            </div>

            {/* Tip button - hidden on landing page */}
            {!(step === 'scan' && !receipt) && (
                <div style={{
                    position: 'fixed',
                    bottom: 0,
                    left: 0,
                    right: 0,
                    padding: '12px 0 28px',
                    display: 'flex',
                    justifyContent: 'center',
                    background: 'linear-gradient(to top, var(--bg-app) 60%, transparent)',
                    pointerEvents: 'none',
                    zIndex: 110
                }}>
                    <a
                        href="https://cash.app/$thedavidkeller/5"
                        target="_blank"
                        rel="noopener noreferrer"
                        style={{
                            pointerEvents: 'all',
                            display: 'inline-flex',
                            alignItems: 'center',
                            gap: 8,
                            color: 'var(--text-disabled)',
                            fontSize: 12,
                            textDecoration: 'none',
                            padding: '8px 14px',
                            borderRadius: 'var(--radius-full)',
                            border: '1px solid var(--border-divider)',
                            background: 'var(--surface-1)',
                            transition: 'all 160ms ease',
                            fontFamily: 'var(--font-sans)',
                        }}
                        onMouseEnter={e => { e.currentTarget.style.borderColor = 'var(--border-base)'; e.currentTarget.style.color = 'var(--text-tertiary)'; }}
                        onMouseLeave={e => { e.currentTarget.style.borderColor = 'var(--border-divider)'; e.currentTarget.style.color = 'var(--text-disabled)'; }}
                    >
                        ☕ Buy me a coffee
                    </a>
                </div>
            )}
        </>
    );
};

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(<App />);

</script>
</body>
</html>
